{% extends "layouts/default.html.twig" %}

{% block main %}
    <div class="row flex-column-reverse flex-lg-row">
        <div class="col-lg-6 mt-lg-4">
            <div class="">
                <h2 class="h4">Mes coordonnées</h2>
                <div class="row align-items-center g-4 mt-1">
                    <div class="col-md-3 col-auto justify-content-center">
                        <a 
                            href="tel:+33649640119" 
                            class="box-contact" 
                            title="Me contacter par téléphone"
                        ><i class="ri-phone-line"></i></a>
                    </div>
                    <div class="col-md-3 col-auto justify-content-center">
                        <a 
                            href="mailto:contact@agathefrederick.fr?subject=Demande de contact via agathefrederick.fr&cci=agathefrederick@gmail.com&body=Bonjour monsieur AGATHE," 
                            class="box-contact" 
                            title="M'envoyer un email"
                        ><i class="ri-at-line"></i></a>
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <p class="lead">Je suis disponbible sur Paris et ses alentours</p>
                <iframe 
                    id="maps-iframe"
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d83998.76457540963!2d2.2769955282495733!3d48.85894658072431!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47e66e1f06e2b70f%3A0x40b82c3688c9460!2sParis!5e0!3m2!1sfr!2sfr!4v1642542678056!5m2!1sfr!2sfr" 
                    width="600" 
                    height="450" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy"
                ></iframe>
            </div>
        </div>
        <div class="col-lg-6">
            {% include 'partials/flashes.html.twig' %}
            <h1 class="h3 mb-3">Vous avez une question, contactez-moi !</h1>
            {{ form_start(form) }}
            {{ form_widget(form) }}
            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script async>
        (() => {
            // Checkbox Entreprise 
            const isCompany = document.getElementById('contact_is_company');
            // Champ nom de l'entreprise
            const companyName = document.getElementById('contact_companyName');
            // Champ upload de la fiche d'emploi
            const fileUploader = document.getElementById('contact_uploadedFile');
            // Champ objet du message
            const objetContact  = document.getElementById('contact_about');
            // Champ caché fileSize
            const fileSize  = document.getElementById('contact_fileSize');
            
            fileUploader.addEventListener('change', (e) => {
                fileSize.value = Number(e.target.files.item(0).size)
                return console.log(fileSizeConsole = document.getElementById('contact_fileSize'));
            });

            const toggleCompanyFields = (e) => {
                if (isCompany.checked) {
                    companyName.parentNode.style.display = 'block';
                    fileUploader.parentNode.style.display = 'block';
                    objetContact.value = 'Offre d\'emploi'
                } else {
                    companyName.parentNode.style.display = 'none';
                    fileUploader.parentNode.style.display = 'none';
                    companyName.value = '';
                    fileUploader.files = null;
                    objetContact.value = '';
                }
            }

            isCompany.addEventListener('change', toggleCompanyFields);
            window.onload = (e) => {
                toggleCompanyFields()
                const messageField = document.getElementById('contact_message');
                messageField.innerText = 'Bonjour monsieur Agathe,';
                messageField.rows = 4;
            }; 
        })();
    </script>
{% endblock %}